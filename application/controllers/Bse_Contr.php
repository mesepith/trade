<?php

defined('BASEPATH') OR exit('No direct script access allowed');

class Bse_Contr extends MX_Controller {
    
    function curlBseCashCategoryWiseTurnover($url=false, $referer=false){        
        
        $url = 'https://www.bseindia.com/markets/equity/EQReports/StockPrcHistori.aspx?flag=1';
        $referer = 'https://www.bseindia.com/markets/equity/EQReports/StockPrcHistori.aspx?flag=1';
        
        $date = date('d');
        $month = date('m');
        $year = date('Y');
        
        $start_date = $date . '%2F'.$month.'%2F' . $year;
        $end_date = $start_date;
        
        
//        $start_date = '10%2F07%2F2020';
//        $end_date = '09%2F07%2F2020';
        
//        exit;
        
        $part1= "'".$url."' ";
        $part2= "'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:74.0) Gecko/20100101 Firefox/74.0' ";
        $part3= "'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' ";
        $part4= "'Accept-Language: en-US,en;q=0.5' ";        
        $part5= "'Origin: https://www.bseindia.com' ";
        $part6= "'Connection: keep-alive' ";
        $part7= "'Referer: ".$referer."' ";        
        $part8= "'Upgrade-Insecure-Requests: 1' ";
        $part9= "'TE: Trailers' ";
        
        $part10= "'__EVENTTARGET=ctl00%24ContentPlaceHolder1%24btnDownload2&__EVENTARGUMENT=&__VIEWSTATE=OP%2F%2Bv0u6SoNTxxL%2Bwl%2FvSuesuSuokZz4JTkCfdVF450HfMiou7o%2FtpGvuELCGOOX9v0dECE2%2FNb4Gmmb4gMdVN6nxvddPM1r8wA0u0ToEFtiRqTWNDqQXK8rhhHbshBsXZiR6GZDLzYmYsxcEHxFQwZZg0P8mFRwV925bYWzNQ9WCSNGsD1mKhpkPLGmNxlA%2BcA9lISWDJnagjAWjHebwJreBcyDDyhNDyaU06%2F6N55%2FEX6w9xs5cYpLovPF1S50IV6sHR4xGHEPRSQ3zvG1G9wM6ZqXkZBfacd2mVRZZqthYISNcJ7KTcWNXj70qxWQ5Pq0ibYcW80h%2BDGwAHI00vQVpB16mlDluMaTDizsFDOtcl1%2B%2F4Yct6ydzEv7JIlVDb%2FkoeIl%2BR1Sj0Hscf2fRCh%2B2QipY8pct9UoCA92aiugsxCJY5M5b1Pjr0ZXVayj6d3dP%2Fp74MDAWvZ74MnbsupUHiC3ABWovBKN6etavinpn93c6dHqk6jt2ogaqu9GS0kMc%2FopF3m0WYQLkMtftp13hMQEfTikfSvt7Ry5yVsHakXZwoGbVOt%2FVWjRUCbH9vXaRISLqxcDutjyXyr1gZadbEXBUUsGblZfzC2G%2BE6bz7oXEY155UHnPI4iRLlHOpwXpBSciC6ENhn0uoUFAJeo3MH5EgXdKY6HyqKFHNj13VD0DqOhLDQTjmHTlJOfOX6YAACscNhSiPH70u5o7er0J0j40bSYN53aB50n402Zwe3FTOw%2FQtCw3VcHSLkQlMgEMbJ%2BgNDlUf%2F7o1kyTEvsz9knQjYAt6idEGnYuw2z9Du5Rk65GUdMTwXmNFdAxKMgI3IlgFlIc2A6V7lsMpsFuRGY90Oan4RLGC4wCgkPzVrNkujhQqflRyL4LxgAcXfHoRFkSIBAtqqBeNfo8NNeyblLVu%2BNBcGbfHhV6S7u7bRiu4%2B49EPmajo9T1Zq%2B6Cx%2FIsW92Uy%2FITwb%2Fyi03s%2BmLN4iAckt1nFXt54m4oksDh%2FlD%2FKlYzPykPnxspkvSlVVpWuVDO6xGgbg6mdVabT1pzKo4P05vkDQ7nP8QWoEh1AESNlX9DtlMjAhy3kMgxYlMTMoiIErMJ6mGv5aMrCDvlr64qrdZhC7vzBIzhEdmarT6p2PZk6JoE4HpcanCQqm51cxG67Cyrx1jI49rLKzFqbYKlsjpiKY5LDyM176mMjjFam95sP0som7C8mOvY0149FS405oAIbFUMjEoJdtMdkpke7PrIqCi168f6Wmlv%2BhoQVfQOxuTPNZe7UFWyIvv%2BdimjSLfotds72oE%2B4IqCPaO%2F75z%2B%2BIcwqyoTsf%2FGes0IcH%2BNQK8xQgik%2BDTK3jbTTSRbGq5ZSZD1jN2a%2F2UeaT9fmj8bvdnWa9ZhAecb5bCwBkSau8w%2BYmAS5iBNiY7o5izJ0LorqEVqhYAh05wvJk0px3OKl%2F3ug%2BDQOISWYgw5ymxzHzq3o6YIz2z2XTMERMQAANxE%2Fqz44%2FSTeIxgD71CGKFt2AYgQu6n1swGHh08NWz%2Fx7yTAnWn0SFebMjfge4YtPqLitMshYTDv4TH63jyeMv9vUlBPdh8VIAFT5aqUPhwq1Hmihmqr2m18C0g6aJFrKhxIbYfYqXAQZXytu44f4J7RHFd0d7RSNnO6EUvwsm0h%2BDEZkIcsGJyAMP6OMAo4wvK67cm5Yy%2B7FFzTDL%2FPWbl3rIqU0U9YIw%2BvrJTbC0wNOLhE3pBc%2Fd7v6AClCBsVQzC5zMIaHbj16RZaOQRXti%2FMP9KcDyVrucphGWB6teB2DnpqDoTRcyN9w8Wgxxp%2Ff%2Bmx4mYs0tmih7jhprO15kZnmf3jrN%2B3AmLS2MHfZ11Ft%2Ba6WP0f6Ps0SyKRM0%2FI5B2LqMW6Iw%2Fbh0CuKxsgGN5NuZKDqKOdOvPWCOxaqRyPtPpPA25ORNq1doHty6nYCOUYmH0VouqLxSstwcPrQmkE9saBFONw8u94kzsY4PVogc1lkLqqEpfWcDzNK7bxzzbDhI%2FrG%2BZxh6MLdqOxRdrGaGOL6KZlFCeJaVEvCa8dAanObzlZwG54JmKnJM98XOeSp128pY2qk5Mh2KU%2Bi0ovgPLtZ7LvUnC7PNQ3X1%2FMBaEEr6d4YZ%2BxPrDF4maq9lMY%2Fw0jFN5sTDmfZdMW9ABIU2DGNejsfJ3XfosagBrXTeS0lwcSWADjPNplJ1I6xT%2FC0LCYOYHuEQATxL5yTNjWTiagGnt%2BE30i8CbhnCs%2Fzu%2FbS%2BbgfMsYRGnuCFsjVTl9YmK0F0%2FKVjTVkzCYT29sHLPifCXo7D3Vum%2FSCorjOQsgDZjHmcmvsMwDU3mrRTQ0VkN1XsOsDlRRA9ENbphtzhVVI1LEUGZ73vSKyhsmf0yBcL2OCbLNTWK3LcSATAjVjVzlAvK2cjYsCGqJ%2B74X9ydABoL6IeYteF5mZwO37Y0JeFtcMXkFW22jvQaxzb8BwT%2FNU2hjH2gh47gn1og1JEB0f6sQQWPmR%2Bf1b8Q7dj5yBcv8XdeQ1iafk0aNP%2FzqY6FMmHFgdKtz0lqWPkf1nVBgwen7vhmzNygiX0%2FQ6uo6OFTt7dVvlo7CS78nBzQWml7x7MibrvHarjULQsfoRfDOt7wlFJGM5YCk4HhJSKscBlmyuYblZBbvki2SWUaFU0c6TXXwDloKSqKkLoAuOkxEpisMf%2FfMyrjmMbY4HfEPxWd7dnfNCUbstMe4bzpv8uZqTRBbp2Ye5Br6fBHKbvwPgEqWbqHHwCT%2B7ZnEKebmbCjbS2l8%2BhuxLv1%2F5AGNLBKvlt1U0evhnLGT%2FMnYAqXkKpFnFIq7Y3qFA7pbtpyxRsFh4z%2BPjE20TjP%2BL3Vo6457YbpcsqBjbgCx1R%2BN6GZX8ePg2%2BzGxF%2Bmh23lhLVMcJFzaUC3c0igacN%2BhBrXqGk%2FFUALRJtMWaqnX1hLw5%2FdSxh7ooaGxru%2BU5ncMF3e5sNBgpStcvFPOf09S4aHCG2EPSwDr5ofK6GQ77KHzKOIbrmnWGx0TWE2Rk8FjpN92DKzM085APSrSmFl%2Fv%2F95sohjj14kioemIGhMxFWQIDT4CQ%2BXQv8yS4%2BNHolsq7KqzpinbVgQRitZb1vaYP2JaCzJ9pea8shH8lD%2FD5QXJJh1Joq8bEFPfC9HRHQbxgzLYMWqaZ8ggNR9bOFYqOFPyof0VfqlE25evkTq6%2F93RimE7cnCwZg1dozH43AkdTHKUpXhzN3dEVpFUlQUaIoGKYOzzbVp58lHDIXvvtRY6JFW8bs%2BiIFjDeLsyPR0BCL3mSsT767vx5Xyuu0AZ4p%2BG%2F81oZ5jlEyAvg6cjAkqMBMCC1Jx7VhfRGDAhGCvLer6jV5BDhcCxmep5C97SGnFTd1LsLpZ8stMN6qt3kWDHFzHQkQWugqQioiRBPp9XDBmzzdulfcE1XJEz72Rv7gJcAVdM8nCMcpmeQYJTlcewpBsCNjPQf3MBqojiC8GlaHeCzw3ookK9i4fOoUDJk0y8T%2FKAC71N%2FhoHJX3EeCmSnhgpIEqu7Mnyl8RczZbimQZboGt4SZ134Ioj3BvQjMpU6TIqwlQxXFIq0ArYys1jsfmTf8FngmIUoXpV5htZyTtkTjL4dH8IllvlB9mArKB7HKx4hZ8yMFvCVWtiiJ0J7m9VGlzaaNbt3a7WhB0cEDouzgBdHJv15VJRapa3MOB2U3WrFllLfB8U7fwq5gNya3x0YkWqU5yXUh8Pdybi65BtN5jK%2FbBG8H9JzSgTwaW5UsIya7oZBerQgFdRloQqVpRijdRTTUEyiOOKjsdCxzp7fkmx%2B43Rg6azMXyyJgXHNisAn9h4BjiRC0L%2BDtFYqaGwCElDg%2Fw18yexLnkZ%2BS5Alio9RO5B%2F6qyB4I1P74fR1GcMPXt83jS4O4fSK4oPBTQ%2B0VdYeIn02sggT%2FWlyeIt5d96hfc9lwbpUSgMXz7yDp9RC%2BwLs8ec%2BUidxuvIlgClV%2B9NAd4OWaWVZ13hCN6nUKU4Q1NOA4Q1sItTRwPYB3n0ZOiK1yUzp0w%2Bhu4UeOVtkuNiht1lV7it77acoV9VKRdhZSjJt87ZV5mBAt7G8fG%2BHwDomSmKjuUKLx%2Fu9ioZWtgQrzziG5tGlaliRCaY%2BBpkAnkMZK2yW19iR6lsqabBsjw%2BKLiz18Si5pv%2FfwiSI1ay7WIwArk%2BjFC5Joro1LdsMJp1JaRMCeaiCjVbcxfj8iSBhbdtIP8t9u9QfRHvFVOW8leT8kgaTDUA2%2FSZqiLp46A9NXMRTksT7qozhigVe%2Bw7walEXwG%2BQyhU2IzKMJhuJss218V3okjF8VkPR8Dam7Hfn5wOhyUaPQLULMB2wPBvsA3IQfoa%2BCpZJGD20r3UujKT2MCVv1U%2FocWb5hAaqXFwWAB33k4%2FutDzwB%2FUgakTRaXyRIRu4gzWnAh0JTLAxMcufHyhNkHNDezmaiQsPsGTx5403OxJbHC%2FgSn2RZkBnTJMO7pLb4d7gHX3fIf9Hxc1fRZIYBIsIakD1AQHa%2BwjQmGoxOnHspVqE3%2BX0nmA4HHWJZ0f2BrtUDdd0SkyciJ6ZWo6ytCIBuaC5&__VIEWSTATEGENERATOR=EC4662D7&__VIEWSTATEENCRYPTED=&__EVENTVALIDATION=lxA5K%2FrWUpp8kDCFDoFONQLWwaVhPYeAPj4WSnGZmgW7mKPaP8AjHXl1%2FPql%2BdbBM3Nt1pR9hPcVY1%2Fit%2BZUl7NVBx9E%2Fu2JmZjGc%2FsXtpftXa%2FQH%2BNDMR5a02%2FkmtSsroqbnZezC%2FYxQVO6gvgYbPX1u27PdrcjohQ9GSI%2FiL0%2BCXBvM28DPkHUPxh7hGzJzIpXtqlfSdVK5RGN%2FO%2BkRTVTqNd%2FGzTe%2B6ddum9YjXT79BhhplgVW2I2ig8fBHE7dx3D8DvzduFvqRCTj3Kn6ZDSB%2BEr%2BJWxqVJK5nmlZR3W99gSBY05NhUxh97f7vRw6Wx4QxAi10vJPGEj%2B08yIutZZ221qVBb0uj%2F9PaZ58kaif6AUj5gQO2XhoTXiR6mlrTxGx7AzP9YljQyE5pgNhjE%2BCfsOLyIGkGcnk96ROLp3bR8l04CL1flXv2z8XwPETiLGPqrSOWAD4ZlqbY3FBbOd%2FNpPtb68leVeQHv9zAQJVfeBJ58vCKpojvZsIp3OOkNByJLwboCzuzQFgxwvvudRABZmMNhFTHxHiijrrT5izIxDbaPWRnhaDwt3wNtWBAc8TOh3X6q%2FXIShdZV8zie%2FCBZj3HpfQwtD%2Bzvz87W6pa%2F4%2B%2Fl8pQa8j9ZGq4ge232PB8VbhgmsjkxCIDVCjVMulvpdFWm2MN9GxiQxWZj3LRqaryB7IiXjRuxFpBERkE1XGa5%2FVEWN%2Fgwp5pr5GCT502%2BrgWZnxM5MkZTnoIfELmO5h%2BTtotGfInufFm9FRp9td75ZIfufGmaN2ONR5LmiigC07JroTJM0aTkog12TGQXOw0W3xRFFsKkWm%2BzJAnNjTwfUT5f%2Ff3le4jsyk669e8IMT9yN3ZgvLI1cJwWEA2d3YE6%2BddD2hZGiFKlifMleWBLBEkeMuozrqKvC4my7SFLEwWTkoSkRL25uOISEc%2FpfdWOtYIw4LjAfoRXt4g3w8rhje1lGpG2E96qn1BSnqMvZlfucx3%2Fu3P7oAW%2BkWt3zzjnRXoJhHtHj0Pk9qTWo6pxsPXR3MxkizXrAmEHqvaySRZYznV2uqWISf0wEPH33kW%2BNtEycVbXhv6YqARll2UNGPl4gea5hVpAwXem8zUP0UKXr0UbcW1QU%2BZD8w9MH0%2Filt%2B%2F%2BQXcKya0fTUAzd7VjFd%2F8sImAtFtMGDlHBE%2BWe6oxegbOy9nWG6qgHxez6t9JngPL9vKMcZnS%2BhUG6wSshUb4n3pD9QnNiJf%2FwMOwjgx8Ice4N6KiEdfijAUAYeXgvbwIGRNEocnX%2FSy0pQwWPfU1UrCE8BYnqnZ5%2BijsjtZ2eh0rkhoxuEA%2FvEGWUq%2F61nYwYpDF4Q0lGcGQEgLQMBkBOolB5m5x0%2BqeOGUpgnAHa4YzjkZKJzqTLWlfqdC3iGWCnn%2B7z135XfYs%2BIbfT35RTWZd%2FZUS2Rd8icBVlqwlFZtmkTdcUUVB1K5C3sQpsDEHeH6jFPOqxhWfdRYJnlhLR6StICF18WWwNNneDymv00CQBg6%2FRAchQvu88sl8Z%2FujLWBHESsahiwY9zmhtBtam52ElrvKf%2B83ePgjHjDezJBk%2FcgkndIAsFMvXHPhlG%2FgMdK2YNUXwZiwxBforw7iFShaNwzm1awywYxD8fHvm3xTGgd721R2APAcDF3pj9gzSoSQU%2FkbXYnFq3%2BsLjkJ4kTq0Ut8zru7r%2FiysIHTFAJB5%2FYmmBnNOQrA7jDRw657H9Tl0dSIkXgdXdmDnnYb7YWoJAzHhfHRuc6mjwTybvY1lIKpCGeiFxdECnPFDUwhIQORaDkHVS8pRSvJwruPxinknY7B%2FN6QMsIF4dsR9qsXdaHHZI%3D&ctl00%24ContentPlaceHolder1%24hdnCode=&ctl00%24ContentPlaceHolder1%24DDate=&ctl00%24ContentPlaceHolder1%24hidDMY=D&ctl00%24ContentPlaceHolder1%24hdflag=1&ctl00%24ContentPlaceHolder1%24hidCurrentDate=7%2F9%2F2020+12%3A00%3A00+AM&ctl00%24ContentPlaceHolder1%24hidYear=&ctl00%24ContentPlaceHolder1%24hidFromDate=07%2F08%2F2020&ctl00%24ContentPlaceHolder1%24hidToDate=07%2F08%2F2020&ctl00%24ContentPlaceHolder1%24hidOldDMY=&ctl00%24ContentPlaceHolder1%24hiddenScripCode=&ctl00%24ContentPlaceHolder1%24hidCompanyVal=&ctl00%24ContentPlaceHolder1%24search=rad_no1&ctl00%24ContentPlaceHolder1%24Hidden1=&ctl00%24ContentPlaceHolder1%24smartSearch=&ctl00%24ContentPlaceHolder1%24scripname=&ctl00%24ContentPlaceHolder1%24Hidden2=&ctl00%24ContentPlaceHolder1%24smartSearch_mf=&ctl00%24ContentPlaceHolder1%24scriptnamemf=&ctl00%24ContentPlaceHolder1%24Hidden3=&ctl00%24ContentPlaceHolder1%24smartSearch_Debt=&ctl00%24ContentPlaceHolder1%24ScriptnameDebt=&ctl00%24ContentPlaceHolder1%24DMY=rdbDaily&ctl00%24ContentPlaceHolder1%24txtFromDate=".$start_date."&ctl00%24ContentPlaceHolder1%24txtToDate=".$end_date."'";

        $cmd = "curl " . $part1 . "-H " . $part2 . "-H " . $part3 . "-H " . $part4 . " --compressed -H " . $part5 . "-H " . $part6 . "-H " . $part7 . "-H " . $part8 . "-H " . $part9 . " --data " . $part10;
        
        $cmd_return = shell_exec($cmd);
        
        return $cmd_return;
        
    }
    
}
